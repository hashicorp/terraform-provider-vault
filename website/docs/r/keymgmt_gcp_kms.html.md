---
layout: "vault"
page_title: "Vault: vault_keymgmt_gcp_kms resource"

description: |-
  Manages GCP Cloud KMS provider in the Vault Key Management secrets engine
---

# vault\_keymgmt\_gcp\_kms

Manages a GCP Cloud KMS provider in the Vault Key Management secrets engine. This resource configures Vault to integrate with Google Cloud Platform's Key Management Service, allowing keys created in Vault to be distributed to GCP Cloud KMS for use in GCP services.

Once configured, keys can be distributed to GCP Cloud KMS using the `vault_keymgmt_distribute_key` resource.

~> **Important**
All data provided in the resource configuration will be written in cleartext to
state and plan files generated by Terraform, and will appear in the console
output when Terraform runs. Protect these artifacts accordingly. See [the main provider documentation](../index.html) for more details.

For more information on managing GCP Cloud KMS with Vault, please refer to the Vault [documentation](https://developer.hashicorp.com/vault/docs/secrets/key-management).

**Note** this feature is available only with Vault Enterprise.

## Example Usage

```hcl
resource "vault_mount" "keymgmt" {
  path = "keymgmt"
  type = "keymgmt"
}

resource "vault_keymgmt_gcp_kms" "production" {
  path           = vault_mount.keymgmt.path
  name           = "gcp-production"
  key_collection = "projects/my-project/locations/us-central1/keyRings/my-keyring"
  credentials    = file("gcp-credentials.json")
}
```

## Argument Reference

The following arguments are supported:

* `namespace` - (Optional) The namespace of the target resource.
  The value should not contain leading or trailing forward slashes.
  The `namespace` is always relative to the provider's configured
  [namespace](/docs/providers/vault/index.html#namespace).
  *Available only for Vault Enterprise*.

* `path` - (Required) Path where the Key Management secrets engine is mounted.

* `name` - (Required) Unique name for this GCP Cloud KMS provider. This cannot be changed after creation.

* `key_collection` - (Required) Full resource name of the GCP KMS key ring where keys will be created. Format: `projects/{project}/locations/{location}/keyRings/{keyring}`

* `credentials` - (Required, Sensitive) JSON-encoded GCP service account credentials with permissions to manage Cloud KMS keys.

## Attributes Reference

In addition to the arguments above, the following attributes are exported:

* `id` - The unique identifier for the GCP Cloud KMS provider. Format: `{path}/kms/{name}`

* `type` - The type of the KMS provider (`azurekeyvault`, `awskms`, or `gcpckms`).

## Import

GCP Cloud KMS providers can be imported using the format `{path}/kms/{name}`, e.g.

```
$ terraform import vault_keymgmt_gcp_kms.production keymgmt/kms/gcp-production
```

~> **Note:** When importing, the `credentials` field will not be populated as it is write-only and not returned by the Vault API.
