---
layout: "vault"
page_title: "Vault: vault_keymgmt_key resource"
description: |-
  Manages keys in the Vault Key Management secrets engine
---

# vault\_keymgmt\_key

Manages keys in the Vault Key Management secrets engine. This resource creates and manages cryptographic keys that can be distributed to external Key Management Services (KMS).

Keys created with this resource can be distributed to AWS KMS, Azure Key Vault, or GCP Cloud KMS using the appropriate distribution resources.

~> **Important** All data provided in the resource configuration will be
written in cleartext to state and plan files generated by Terraform, and
will appear in the console output when Terraform runs. Protect these
artifacts accordingly. See
[the main provider documentation](../index.html)
for more details.

**Note** this feature is available only with Vault Enterprise.

## Example Usage

### Basic Symmetric Key

```hcl
resource "vault_mount" "keymgmt" {
  path = "keymgmt"
  type = "keymgmt"
}

resource "vault_keymgmt_key" "aes_key" {
  path = vault_mount.keymgmt.path
  name = "aes-encryption-key"
  type = "aes256-gcm96"
}
```

### RSA Key with Deletion Protection

```hcl
resource "vault_keymgmt_key" "rsa_key" {
  path            = vault_mount.keymgmt.path
  name            = "rsa-signing-key"
  type            = "rsa-2048"
  deletion_allowed = false
}
```

### Key with Replication to Multiple Regions

```hcl
resource "vault_keymgmt_key" "replicated_key" {
  path = vault_mount.keymgmt.path
  name = "multi-region-key"
  type = "aes256-gcm96"
  
  replica_regions = ["us-west-1", "us-east-1", "eu-west-1"]
}
```

## Argument Reference

The following arguments are supported:

* `namespace` - (Optional) The namespace of the target resource.
  The value should not contain leading or trailing forward slashes.
  The `namespace` is always relative to the provider's configured
  [namespace](/docs/providers/vault/index.html#namespace).
  *Available only for Vault Enterprise*.

* `path` - (Required) Path where the Key Management secrets engine is mounted.

* `name` - (Required) Name of the key. This cannot be changed after creation.

* `type` - (Required) Type of cryptographic key to create. Valid values are:
  - `aes256-gcm96` - AES-256 wrapped with GCM using a 96-bit nonce (symmetric)
  - `rsa-2048` - RSA with 2048 bits (asymmetric)
  - `rsa-3072` - RSA with 3072 bits (asymmetric)
  - `rsa-4096` - RSA with 4096 bits (asymmetric)
  - `ecdsa-p256` - ECDSA using curve P-256 (asymmetric)
  - `ecdsa-p384` - ECDSA using curve P-384 (asymmetric)
  - `ecdsa-p521` - ECDSA using curve P-521 (asymmetric)

* `deletion_allowed` - (Optional) If set to `true`, the key can be deleted. Defaults to `false`.

* `replica_regions` - (Optional) Set of regions where the key should be replicated. This is used when distributing keys to multi-region KMS providers.

## Attributes Reference

In addition to the arguments above, the following attributes are exported:

* `id` - The unique identifier for the key resource. Format: `{path}/key/{name}`

* `latest_version` - The latest version number of the key.

* `min_enabled_version` - The minimum enabled version of the key.

## Import

Key Management keys can be imported using the format `{path}/key/{name}`, e.g.

```
$ terraform import vault_keymgmt_key.aes_key keymgmt/key/aes-encryption-key
```

## Key Types and Use Cases

### Symmetric Keys (AES-256-GCM96)

Symmetric keys are used for encryption and decryption operations where the same key is used for both operations. These keys are suitable for:
- Data encryption at rest
- Encrypting data before storing in databases
- General-purpose encryption where both parties share the key

### Asymmetric Keys (RSA, ECDSA)

Asymmetric keys use a public/private key pair and are suitable for:
- Digital signatures and verification
- Asymmetric encryption where data is encrypted with the public key and decrypted with the private key
- Certificate signing operations

The RSA key sizes (2048, 3072, 4096) provide different security levels, with larger keys offering more security at the cost of performance.

ECDSA keys provide similar security to RSA keys but with smaller key sizes and better performance. The curve size (P-256, P-384, P-521) determines the security level.

## Key Deletion

By default, keys cannot be deleted (`deletion_allowed = false`) to prevent accidental deletion of critical cryptographic material. This is a safety feature to protect production keys.

To allow deletion, explicitly set `deletion_allowed = true`.
