---
layout: "vault"
page_title: "Vault: vault_ldap_secret_backend resource"
sidebar_current: "docs-vault-resource-ldap-secret-backend"
description: |-
  Creates a LDAP secret backend for Vault.
---

# vault\_ldap\_secret\_backend

Creates a LDAP Secret Backend for Vault.

~> **Important** All data provided in the resource configuration will be
written in cleartext to state and plan files generated by Terraform, and
will appear in the console output when Terraform runs. Protect these
artifacts accordingly. See
[the main provider documentation](../index.html)
for more details.

## Example Usage

```hcl

resource "vault_ldap_secret_backend" "config" {
  path              = "my-custom-ldap"
  binddn            = "CN=Administrator,CN=Users,DC=corp,DC=example,DC=net"
  bindpass          = "SuperSecretPassw0rd"
  url               = "ldaps://localhost"
  insecure_tls      = "true"
  userdn            = "CN=Users,DC=corp,DC=example,DC=net"
  rotation_schedule = "0 * * * SAT"
  rotation_window   = 3600
}
```

## Argument Reference

The following arguments are supported:

* `namespace` - (Optional) The namespace to provision the resource in.
  The value should not contain leading or trailing forward slashes.
  The `namespace` is always relative to the provider's configured [namespace](/docs/providers/vault/index.html#namespace).
  *Available only for Vault Enterprise*.

* `path` - (Optional) The unique path this backend should be mounted at. Must
  not begin or end with a `/`. Defaults to `ldap`.

* `binddn` - (Required) Distinguished name of object to bind when performing user and group search.

* `bindpass` - (Optional) Password to use along with binddn when performing user search. Conflicts with `bindpass_wo`.
  Exactly one of `bindpass` or `bindpass_wo` must be provided.

* `bindpass_wo_version` - (Optional) Version counter for write-only bind password.
  Required when using `bindpass_wo`. For more information about write-only attributes, see
  [using write-only attributes](/docs/providers/vault/guides/using_write_only_attributes).

* `certificate` - (Optional) CA certificate to use when verifying LDAP server certificate, must be
  x509 PEM encoded.

* `connection_timeout` - (Optional) Timeout, in seconds, when attempting to connect to the LDAP server before trying
  the next URL in the configuration.

* `client_tls_cert` - (Optional) Client certificate to provide to the LDAP server, must be x509 PEM encoded.

* `client_tls_key` - (Optional) Client certificate key to provide to the LDAP server, must be x509 PEM encoded.

* `insecure_tls` - (Optional) Skip LDAP server SSL Certificate verification. This is not recommended for production.
  Defaults to `false`.

* `password_policy` - (Optional) Name of the password policy to use to generate passwords.

* `request_timeout` - (Optional) Timeout, in seconds, for the connection when making requests against the server
  before returning back an error.

* `starttls` - (Optional) Issue a StartTLS command after establishing unencrypted connection.

* `schema` - (Optional)  The LDAP schema to use when storing entry passwords. Valid schemas include `openldap`, `ad`, and `racf`. Default is `openldap`.

* `credential_type` - (Optional) The type of credential to generate. Valid values include `password` and `phrase`. Default is `password`.

* `upndomain` - (Optional) Enables userPrincipalDomain login with [username]@UPNDomain.

* `url` - (Required) LDAP URL to connect to. Multiple URLs can be specified by concatenating
  them with commas; they will be tried in-order. Defaults to `ldap://127.0.0.1`.

* `userattr` - (Optional) Attribute used when searching users. Defaults to `cn`.

* `userdn` - (Optional) LDAP domain to use for users (eg: ou=People,dc=example,dc=org)`.

* `skip_static_role_import_rotation` - (Optional) If set to true, static roles will not be rotated during import.
  Defaults to false. Requires Vault 1.16 or above.

* `rotation_period` - (Optional) The amount of time in seconds Vault should wait before rotating the root credential.
  A zero value tells Vault not to rotate the root credential. The minimum rotation period is 10 seconds. Requires Vault Enterprise 1.19+.

* `rotation_schedule` - (Optional) The schedule, in [cron-style time format](https://en.wikipedia.org/wiki/Cron),
  defining the schedule on which Vault should rotate the root token. Requires Vault Enterprise 1.19+.

* `rotation_window` - (Optional) The maximum amount of time in seconds allowed to complete
  a rotation when a scheduled token rotation occurs. The default rotation window is
  unbound and the minimum allowable window is `3600`. Requires Vault Enterprise 1.19+.

* `disable_automated_rotation` - (Optional) Cancels all upcoming rotations of the root credential until unset. Requires Vault Enterprise 1.19+.

### Common Mount Arguments
These arguments are common across all resources that mount a secret engine.

* `description` - (Optional) Human-friendly description of the mount

* `default_lease_ttl_seconds` - (Optional) Default lease duration for tokens and secrets in seconds

* `max_lease_ttl_seconds` - (Optional) Maximum possible lease duration for tokens and secrets in seconds

* `audit_non_hmac_response_keys` - (Optional) Specifies the list of keys that will not be HMAC'd by audit devices in the response data object.

* `audit_non_hmac_request_keys` - (Optional) Specifies the list of keys that will not be HMAC'd by audit devices in the request data object.

* `local` - (Optional) Boolean flag that can be explicitly set to true to enforce local mount in HA environment

* `options` - (Optional) Specifies mount type specific options that are passed to the backend

* `seal_wrap` - (Optional) Boolean flag that can be explicitly set to true to enable seal wrapping for the mount, causing values stored by the mount to be wrapped by the seal's encryption capability

* `external_entropy_access` - (Optional) Boolean flag that can be explicitly set to true to enable the secrets engine to access Vault's external entropy source

* `allowed_managed_keys` - (Optional) Set of managed key registry entry names that the mount in question is allowed to access

* `listing_visibility` - (Optional) Specifies whether to show this mount in the UI-specific
  listing endpoint. Valid values are `unauth` or `hidden`. If not set, behaves like `hidden`.

* `passthrough_request_headers` - (Optional) List of headers to allow and pass from the request to
  the plugin.

* `allowed_response_headers` - (Optional) List of headers to allow, allowing a plugin to include
  them in the response.

* `delegated_auth_accessors` - (Optional)  List of allowed authentication mount accessors the
  backend can request delegated authentication for.

* `plugin_version` - (Optional) Specifies the semantic version of the plugin to use, e.g. "v1.0.0".
  If unspecified, the server will select any matching unversioned plugin that may have been
  registered, the latest versioned plugin registered, or a built-in plugin in that order of precedence.

* `identity_token_key` - (Optional)  The key to use for signing plugin workload identity tokens. If
  not provided, this will default to Vault's OIDC default key. Requires Vault Enterprise 1.16+.

## Ephemeral Attributes Reference

The following write-only attributes are supported:

* `bindpass_wo` - (Optional) Write-only password to use along with binddn when performing user search. Can be updated. Conflicts with `bindpass`.
  Exactly one of `bindpass` or `bindpass_wo` must be provided.
  **Note**: This property is write-only and will not be read from the API.

## Attributes Reference

No additional attributes are exported by this resource.

## Import

LDAP secret backend can be imported using the `${mount}/config`, e.g.

```
$ terraform import vault_ldap_secret_backend.config ldap/config
```
