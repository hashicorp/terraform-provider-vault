---
layout: "vault"
page_title: "Vault: vault_alicloud_secret_backend resource"
sidebar_current: "docs-vault-resource-alicloud-secret-backend"
description: |-
  Manages the AliCloud secrets engine in Vault
---

# vault\_alicloud\_secret\_backend

Manages the AliCloud secrets engine in Vault. The AliCloud secrets engine dynamically generates AliCloud 
access credentials based on RAM policies. This allows Vault users to gain access to AliCloud resources 
without needing to create or manage AliCloud credentials manually.

~> **Important** All data provided in the resource configuration will be
written in cleartext to state and plan files generated by Terraform, and
will appear in the console output when Terraform runs. Protect these
artifacts accordingly. See
[the main provider documentation](../index.html)
for more details.

## Example Usage

### Basic Configuration

```hcl
resource "vault_alicloud_secret_backend" "alicloud" {
  path          = "alicloud"
  access_key    = var.alicloud_access_key
  secret_key_wo = var.alicloud_secret_key
}

variable "alicloud_access_key" {
  description = "AliCloud Access Key ID"
  type        = string
  sensitive   = true
}

variable "alicloud_secret_key" {
  description = "AliCloud Secret Access Key"
  type        = string
  sensitive   = true
}
```

## Argument Reference

The following arguments are supported:

* `path` - (Required) Path where the AliCloud secrets engine will be mounted. This path cannot be changed after creation.

* `access_key` - (Required, Sensitive) The AliCloud Access Key ID with permissions to manage RAM users and policies.
  This credential is used by Vault to create and manage dynamic AliCloud credentials.

## Attributes Reference

In addition to the arguments above, the following attributes are exported:

* `path` - The path where the AliCloud secrets engine is mounted.
* `access_key` - The AliCloud Access Key ID configured for this backend.

## Ephemeral Attributes Reference

The following attributes are write-only and will never be read back from Vault or stored in Terraform state:

* `secret_key_wo` - (Write-Only) The AliCloud Secret Access Key. This value is only written to Vault and never read back.

## Understanding the Write-Only Pattern

The `secret_key_wo` field uses a write-only pattern to enhance security:

1. **Write-Only**: The secret key is sent to Vault but never read back or stored in Terraform state
2. **Required Field**: Since it's required, any change to the value will trigger an update to Vault
3. **Credential Rotation**: To rotate credentials, simply update `secret_key_wo` to the new value and run `terraform apply`


## Import

AliCloud secrets engines can be imported using the `path`, e.g.

```
$ terraform import vault_alicloud_secret_backend.alicloud alicloud
```

~> **Note:** When importing, the `secret_key_wo` field will not be populated as it is 
write-only and not returned by the Vault API. You will need to provide this value in your 
configuration after import.

## Required AliCloud Permissions

The Access Key provided must have the following RAM permissions:

### Minimum Required Permissions

- `ram:CreateUser` - Create RAM users for dynamic credentials
- `ram:DeleteUser` - Delete RAM users when credentials expire
- `ram:AttachPolicyToUser` - Attach policies to created users
- `ram:DetachPolicyFromUser` - Detach policies from users
- `ram:CreateAccessKey` - Create access keys for users
- `ram:DeleteAccessKey` - Delete access keys
- `ram:GetUser` - Read user information
- `ram:ListAccessKeys` - List access keys for users

### Recommended Policy

```json
{
  "Version": "1",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ram:CreateUser",
        "ram:DeleteUser",
        "ram:AttachPolicyToUser",
        "ram:DetachPolicyFromUser",
        "ram:CreateAccessKey",
        "ram:DeleteAccessKey",
        "ram:GetUser",
        "ram:ListAccessKeys"
      ],
      "Resource": "*"
    }
  ]
}
```

## References

- [AliCloud Secrets Engine API Documentation](https://developer.hashicorp.com/vault/api-docs/secret/alicloud)
- [AliCloud RAM Documentation](https://www.alibabacloud.com/help/en/ram)