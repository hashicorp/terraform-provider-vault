---
layout: "vault"
page_title: "Vault: vault_spiffe_secret_backend_role resource"
sidebar_current: "docs-vault-resource-vault-spiffe-secret-backend-role"
description: |-
 Manage a named role within a SPIFFE backend for Vault.
---

# vault\_spiffe\_secret\_backend\_config

Manage a named role within a SPIFFE secrets backend. The role specifies
the content of JWTs.

~> **Important** All data provided in the resource configuration will be
written in cleartext to state and plan files generated by Terraform, and
will appear in the console output when Terraform runs. Protect these
artifacts accordingly. See
[the main provider documentation](../index.html)
for more details.

## Example Usage

```hcl
resource "vault_mount" "spiffe_secrets" {
  path = "spiffe"
  type = "spiffe"
}

resource "vault_spiffe_secret_backend_config" "spiffe_config" {
	mount			= vault_mount.spiffe_secrets.path
	trust_domain	= "example.com"
}

resource "vault_spiffe_secret_backend_role" "spiffe_role" {
  	mount		    = vault_mount.spiffe_secrets.path
  	name		    = "example-role"
  	template	    = jsonencode(
        {
            sub = "spiffe://example.com/workload"
        }
    )
}
```

## Argument Reference

The following arguments are supported:

* `namespace` - (Optional) The namespace to provision the resource in.
  The value should not contain leading or trailing forward slashes.
  The `namespace` is always relative to the provider's configured
  [namespace](/docs/providers/vault/index.html#namespace).

* `mount` - (Required) The SPIFFE secret backend the resource belongs to.

* `name` - (Required) The unique name of the SPIFFE role you want to manage.

* `template` - (Required) The template string to use for generating tokens. This
  may be in stringified JSON or base64 format.

- `ttl` - (Optional) TTL of the tokens generated against the role. Uses
  [duration](https://developer.hashicorp.com/vault/docs/concepts/duration-format)
  format strings. TTLs of generated tokens will be capped by the lifespan of the
  current signing key.

- `use_jti_claim` - (Optional) If true, the jti claim will be included in JWTs,
  which may impact their reusability.


## Attributes Reference

No additional attributes are exported by this resource.

## Import

The SPIFFE role can be imported using the resource's `id`.
In the case of the example above the `id` would be `spiffe/role/example-role`,
where the `spiffe` component is the resource's `mount`, e.g.

```
$ terraform import vault_spiffe_secret_backend_role.spiffe_role spiffe/role/example-role
```
