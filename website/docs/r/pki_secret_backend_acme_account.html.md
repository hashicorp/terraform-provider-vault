---
layout: "vault"
page_title: "Vault: vault_pki_secret_backend_acme_account resource"
sidebar_current: "docs-vault-resource-pki-secret-backend-acme-account"
description: |-
  Manages PKI ACME accounts for external CA integration.
---

# vault\_pki\_secret\_backend\_acme\_account

Manages PKI ACME accounts for external CA integration. This resource allows you to configure an ACME account that can be used to obtain certificates from external ACME-compliant Certificate Authorities.

~> **Important** All data provided in the resource configuration will be
written in cleartext to state and plan files generated by Terraform, and
will appear in the console output when Terraform runs. Protect these
artifacts accordingly. See
[the main provider documentation](../index.html)
for more details.

## Example Usage

```hcl
resource "vault_mount" "pki" {
  path = "pki"
  type = "pki"
}

resource "vault_pki_secret_backend_acme_account" "example" {
  mount         = vault_mount.pki.path
  name          = "my-acme-account"
  directory_url = "https://acme-v02.api.letsencrypt.org/directory"
  email_contacts = [
    "admin@example.com"
  ]
  key_type = "ec-256"
}
```

## Example Usage with External Account Binding (EAB)

```hcl
resource "vault_pki_secret_backend_acme_account" "with_eab" {
  mount         = vault_mount.pki.path
  name          = "my-acme-account-eab"
  directory_url = "https://acme.example.com/directory"
  email_contacts = [
    "admin@example.com"
  ]
  key_type = "rsa-2048"
  eab_kid  = "your-eab-key-id"
  eab_key  = "your-eab-hmac-key"
}
```

## Example Usage with Custom Trusted CA

```hcl
resource "vault_pki_secret_backend_acme_account" "with_ca" {
  mount         = vault_mount.pki.path
  name          = "my-acme-account-ca"
  directory_url = "https://internal-acme.example.com/directory"
  email_contacts = [
    "admin@example.com"
  ]
  key_type   = "ec-384"
  trusted_ca = file("${path.module}/ca-bundle.pem")
}
```

## Argument Reference

The following arguments are supported:

* `namespace` - (Optional) The namespace to provision the resource in.
  The value should not contain leading or trailing forward slashes.
  The `namespace` is always relative to the provider's configured [namespace](/docs/providers/vault/index.html#namespace).
   *Available only for Vault Enterprise*.

* `mount` - (Required) The path where the PKI secret backend is mounted.

* `name` - (Required) Name of the ACME account. Must be unique within the backend.

* `directory_url` - (Required) ACME Directory URL for the Certificate Authority (e.g., `https://acme-v02.api.letsencrypt.org/directory` for Let's Encrypt production).

* `email_contacts` - (Required) List of email addresses for the ACME account. These will be used for important notifications from the CA.

* `key_type` - (Optional) Key type to generate for the account key. Valid values are `ec-256`, `ec-384`, `ec-521`, `rsa-2048`, `rsa-4096`, `rsa-8192`. Defaults to `ec-256`.

* `eab_kid` - (Optional) The external account binding key ID to create the initial account. Required by some CAs for account registration. This is a write-only field.

* `eab_key` - (Optional) The external account binding HMAC key to create the initial account. Required by some CAs for account registration. This is a write-only field.

* `force` - (Optional) Force the deletion of an account even if orders are still pending. Defaults to `false`.

* `trusted_ca` - (Optional) PEM-encoded trusted CA certificates for the ACME server. Use this when connecting to an ACME server with a custom or self-signed certificate.

## Attributes Reference

In addition to the fields above, the following attributes are exported:

* `id` - The ID of the resource in the format `<mount>/config/acme-account/<name>`.

* `active_key_version` - Version of the active account key, starts at zero.

## Import

PKI ACME accounts can be imported using the format `<mount>/config/acme-account/<name>`, e.g.

```
$ terraform import vault_pki_secret_backend_acme_account.example pki/config/acme-account/my-acme-account