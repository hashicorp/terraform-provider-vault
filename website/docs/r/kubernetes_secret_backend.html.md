---
layout: "vault"
page_title: "Vault: vault_kubernetes_secret_backend resource"
sidebar_current: "docs-vault-resource-kubernetes-secret-backend"
description: |-
  Creates a Kubernetes Secrets Engine in Vault.
---

# vault\_kubernetes\_secret\_backend

Creates a Kubernetes Secrets Backend for Vault.

The Kubernetes Secrets Engine for Vault generates Kubernetes service account tokens, and 
optionally service accounts, role bindings, and roles.

~> **Important** All data provided in the resource configuration will be
written in cleartext to state and plan files generated by Terraform, and
will appear in the console output when Terraform runs. Protect these
artifacts accordingly. See
[the main provider documentation](../index.html)
for more details.

## Example Usage

```hcl
resource "vault_kubernetes_secret_backend" "config" {
  path                      = "kubernetes"
  description               = "kubernetes secrets engine description"
  default_lease_ttl_seconds = 43200
  max_lease_ttl_seconds     = 86400
  kubernetes_host           = "https://127.0.0.1:61233"
  kubernetes_ca_cert        = file("/path/to/cert")
  service_account_jwt       = file("/path/to/token")
  disable_local_ca_jwt      = false
}
```

## Argument Reference

This resource directly accepts all [`vault_mount`](mount.html.md) fields.

Additionally, the following arguments are supported:

* `namespace` - (Optional) The namespace to provision the resource in.
  The value should not contain leading or trailing forward slashes.
  The `namespace` is always relative to the provider's configured [namespace](/docs/providers/vault#namespace).
  *Available only for Vault Enterprise*.

* `kubernetes_host` - (Optional) The Kubernetes API URL to connect to. Required if the 
  standard pod environment variables `KUBERNETES_SERVICE_HOST` or `KUBERNETES_SERVICE_PORT` 
  are not set on the host that Vault is running on.

* `kubernetes_ca_cert` - (Optional) A PEM-encoded CA certificate used by the 
  secrets engine to verify the Kubernetes API server certificate. Defaults to the local 
  pod’s CA if Vault is running in Kubernetes. Otherwise, defaults to the root CA set where
  Vault is running.

* `service_account_jwt` - (Optional) The JSON web token of the service account used by the
  secrets engine to manage Kubernetes credentials. Defaults to the local pod’s JWT if Vault 
  is running in Kubernetes.

* `disable_local_ca_jwt` - (Optional) Disable defaulting to the local CA certificate and 
  service account JWT when Vault is running in a Kubernetes pod.

## Attributes Reference

No additional attributes are exported by this resource.

## Import

The Kubernetes secret backend can be imported using its `path` e.g.

```
$ terraform import vault_kubernetes_secret_backend.config kubernetes
```
